
<!-- Third Div -->
<div class="sales-info">
  <div class="sales-graph">
    <!-- New Section: Sales Info and Tabs -->
    <div class="sales-header">
      <div class="sales-summary">
        <span class="sales-title">{{graphDayOrders}}’s Order</span>
        <span class="sales-amount">₹{{graphTotalAMount}}</span>
      </div>

      <div class="sales-tabs-container">
        <div class="tabs-group">
          <button class="tab" (click)="loadtoday('graph')">Today</button>
          <button class="tab" (click)="loadyesterday('graph')">This Yesterday</button>
          <button class="tab" (click)="loadweek('graph')">This Week</button>
          <button class="tab" (click)="loadmonth('graph')">This Month</button>

        </div>
        <!-- <button class="calendar-btn">
        <img src="Images/CalendarDots.svg" alt="Calendar Icon" />
      </button> -->
    </div>

  </div>

  <!-- Graph Container -->
  <div class="graph-container">
    @for (d of graphRecord; track d) {
      <div class="bar-group">
        <div class="bar dine-in"  [style.height.px]="d.orderMode2 && d.orderMode2[0] && d.orderMode2[0].Amount != null ? (+d.orderMode2[0].Amount % 100) * 2 : 0"
        title="{{d.orderMode2 && d.orderMode2[0] ? d.orderMode2[0].Amount : ''}}"></div>
        <div class="bar delivery"
          [style.height.px]="d.orderMode1 && d.orderMode1[0] && d.orderMode1[0].Amount != null ? (+d.orderMode1[0].Amount % 100) * 2 : 0"
          title="{{d.orderMode1 && d.orderMode1[0] ? d.orderMode1[0].Amount : ''}}">
        </div>
        <span class="time-label">{{d.Time}}</span>
      </div>
    }

  </div>

  <div class="legend-container">
    <div class="legend-item">
      <span class="legend-dot blue-dot"></span>
      <span class="legend-text">Dine In</span>
    </div>
    <div class="legend-item">
      <span class="legend-dot purple-dot"></span>
      <span class="legend-text">Delivery</span>
    </div>
  </div>

</div>





<div class="total-sales-amount restaurant-total-sales">
  <div class="total-sales-info">
    <div class="sales-title">
      <h2>Total Sales Amount</h2> <!-- Updated heading -->
      <p >Grand Total: <span >₹{{payByChartrecordTotalAmount}}</span></p> <!-- Span with bold and blue color -->
    </div>
    <div class="sales-dropdown">
      <select (change)="loadday(byday)" [(ngModel)]="byday">
        <option value="loadtoday" selected>Today</option>
        <option value="loadyesterday">Yesterday</option>
        <option value="loadweek">This Week</option>
        <option value="loadmonth">This Month</option>
        <!-- <option value="today" (change)="loadtoday()" selected>Today</option>
        <option value="Yesterday" (change)="loadyesterday()">Yesterday</option>
        <option value="this-week" (change)="loadweek()">This Week</option>
        <option value="this-month" (change)="loadmonth()">This Month</option> -->
      </select>
    </div>
  </div>

  <div class="sales-container">
    <div class="sales-legend">
      <h4>Sales Breakdown</h4>
      <ul>
        @for (d of payByChartrecord; track d) {
          <li><span class="legend-color cash"></span> {{d.Paybyname}}: ₹{{d.Amount}}</li>
        }
        <!-- <li><span class="legend-color card"></span> Card: ₹15,000</li>
        <li><span class="legend-color upi"></span> UPI: ₹10,000</li>
        <li><span class="legend-color due-balance"></span> Due: ₹5,000</li> -->
      </ul>
    </div>
    <div class="sales-pie-chart">
      <canvas id="salesChart"></canvas>
    </div>
  </div>


</div>

</div>
<script>
  function toggleDropdown() {
  const dropdown = document.getElementById("profileDropdown");
  dropdown.style.display = dropdown.style.display === "block" ? "none" : "block";
}

// Optional: Close the dropdown when clicking outside
document.addEventListener("click", function(event) {
const profile = document.querySelector(".profile");
const dropdown = document.getElementById("profileDropdown");

if (!profile.contains(event.target)) {
dropdown.style.display = "none";
}
});

</script>


<script>
  const ctx = document.getElementById('salesChart').getContext('2d');
  const salesChart = new Chart(ctx, {
  type: 'pie',
  data: {
  labels: ['Cash', 'Card', 'UPI', 'Due Balance'],
  datasets: [{
  label: 'Sales Distribution',
  data: [25000, 15000, 10000, 5000], // Replace with your actual amounts
  backgroundColor: [
  'rgba(0, 123, 255, 0.6)', // Cash color
  'rgba(40, 167, 69, 0.6)', // Card color
  'rgba(255, 193, 7, 0.6)', // UPI color
  'rgba(255, 0, 0, 0.6)'    // Due Balance color
  ],
  borderColor: [
  'rgba(255, 255, 255, 1)', // White border
  'rgba(255, 255, 255, 1)', // White border
  'rgba(255, 255, 255, 1)', // White border
  'rgba(255, 255, 255, 1)'  // White border
  ],
  borderWidth: 1
  }]
  },
  options: {
  responsive: true,
  plugins: {
  legend: {
  display: false, // Set to false to hide the legend
  },
  tooltip: {
  callbacks: {
  label: function(tooltipItem) {
  return `${tooltipItem.label}: ₹${tooltipItem.raw}`;
}
}
}
}
}
});
</script>


<script>
  document.querySelectorAll('.action-icon').forEach(icon => {
  icon.addEventListener('click', function() {
  const dropdown = this.nextElementSibling; // Get the dropdown
  dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block'; // Toggle display
  });
  });

  // Optional: Close dropdown when clicking outside
  window.addEventListener('click', function(event) {
  if (!event.target.closest('.actiondrop')) {
  document.querySelectorAll('.dropdown-list').forEach(dropdown => {
  dropdown.style.display = 'none';
  });
}
});

</script>